angular.module("ngfileexplorer",[]).factory("$explorer",function(){var k=null,b=null,e=null,f=null,g=null,h=function(a){try{a.isDirectory||console.log("listDir incorrect type");b=a;var d=function(a){e=a}.bind(this);a.getParent(d,function(a){console.log("Get parent error: "+a.code)});var c=a.createReader(),p=function(a){for(var d=[],m=[],c=0;c<a.length;++c){var b=a[c];b.isDirectory&&"."!=b.name[0]?d.push(b):b.isFile&&"."!=b.name[0]&&m.push(b)}g(d,m)}.bind(this);c.readEntries(p,function(a){console.log("listDir readEntries error: "+
a.code)})}catch(f){console.log("listDir :  "+f.message)}},l=function(a){try{"d"==a?h(f):"f"==a&&n(f)}catch(b){console.log("openItem :  "+b.message)}},n=function(a){try{a.isFile||console.log("readFile incorrect type");var b=function(a){g(null,null,a)}.bind(this);a.file(b,function(a){console.log("file read error:"+evt.target.error.code)})}catch(c){console.log("readFile :  "+c.message)}};return{getFileSystem:function(){try{var a=function(a){k=a.root;h(k)}.bind(this);window.requestFileSystem(LocalFileSystem.PERSISTENT,
0,a,function(a){console.log("File System Error: "+a.target.error.code)})}catch(b){console.log("listDir :  "+b.message)}},readFile:n,openItem:l,itemType:{Directory:"d",File:"f"},getActiveItem:function(a,d){try{var c=function(a){f=a;l("d")}.bind(this),e=function(a){console.log("Unable to find directory: "+a.code)},g=function(a){f=a;l("f")}.bind(this),h=function(a){console.log("Unable to find file: "+a.code)};"d"==d&&null!=b?b.getDirectory(a,{create:!1,exclusive:!1},c,e):"f"==d&&null!=b&&b.getFile(a,
{create:!1,exclusive:!1},g,h)}catch(k){console.log("getActiveItems :  "+k.message)}},getClipboardItem:function(a){},registorCallBack:function(a){g=a},getParentDirectory:function(){return e},getcurrentDirectory:function(){return b},back:function(){e&&h(e)}}});